{"ast":null,"code":"import \"antd/es/message/style\";\nimport _message from \"antd/es/message\";\nimport _defineProperty from \"/Users/manqingchen/Documents/Project/Zjddjt/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport axios from 'axios';\nimport jwt from './token';\nexport default ((url, options = {}, allRes = false) => {\n  let token = jwt.getToken();\n  token ? axios.defaults.headers.common.authorization = \"Bearer \".concat(token) : delete axios.defaults.headers.common.authorization;\n  return axios(_objectSpread({\n    url\n  }, options)).then(r => {\n    if (allRes) {\n      return r.data;\n    }\n\n    if (r.data.code === 200) {\n      return r.data.data;\n    }\n  }).catch(e => {\n    if (e.response) {\n      _message.error(e.response.data.msg);\n\n      return e.response.data;\n    }\n\n    _message.error('网络错误');\n  });\n});","map":{"version":3,"sources":["/Users/manqingchen/Documents/Project/Zjddjt/system/src/util/request.js"],"names":["axios","jwt","url","options","allRes","token","getToken","defaults","headers","common","authorization","then","r","data","code","catch","e","response","error","msg"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,OAAOC,GAAP,MAAgB,SAAhB;AAGA,gBAAc,CAACC,GAAD,EAAMC,OAAO,GAAG,EAAhB,EAAoBC,MAAM,GAAG,KAA7B,KAAuC;AACnD,MAAIC,KAAK,GAAGJ,GAAG,CAACK,QAAJ,EAAZ;AAEAD,EAAAA,KAAK,GACDL,KAAK,CAACO,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8BC,aAA9B,oBAAwDL,KAAxD,CADC,GAED,OAAOL,KAAK,CAACO,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8BC,aAFzC;AAIA,SAAOV,KAAK;AACVE,IAAAA;AADU,KAEPC,OAFO,EAAL,CAINQ,IAJM,CAIDC,CAAC,IAAI;AACT,QAAIR,MAAJ,EAAY;AACV,aAAOQ,CAAC,CAACC,IAAT;AACD;;AAED,QAAID,CAAC,CAACC,IAAF,CAAOC,IAAP,KAAgB,GAApB,EAAyB;AACvB,aAAOF,CAAC,CAACC,IAAF,CAAOA,IAAd;AACD;AACF,GAZM,EAaNE,KAbM,CAaAC,CAAC,IAAI;AACV,QAAIA,CAAC,CAACC,QAAN,EAAgB;AACd,eAAQC,KAAR,CAAcF,CAAC,CAACC,QAAF,CAAWJ,IAAX,CAAgBM,GAA9B;;AACA,aAAOH,CAAC,CAACC,QAAF,CAAWJ,IAAlB;AACD;;AACD,aAAQK,KAAR,CAAc,MAAd;AACD,GAnBM,CAAP;AAoBD,CA3BD","sourcesContent":["import axios from 'axios'\nimport { message } from 'antd'\nimport jwt from './token'\n\n\nexport default(url, options = {}, allRes = false) => {\n  let token = jwt.getToken()\n\n  token\n    ? axios.defaults.headers.common.authorization = `Bearer ${token}`\n    : delete axios.defaults.headers.common.authorization\n\n  return axios({\n    url,\n    ...options\n  })\n  .then(r => {\n    if (allRes) {\n      return r.data\n    }\n\n    if (r.data.code === 200) {\n      return r.data.data\n    }\n  })\n  .catch(e => {\n    if (e.response) {\n      message.error(e.response.data.msg)\n      return e.response.data\n    }\n    message.error('网络错误')\n  })\n}"]},"metadata":{},"sourceType":"module"}