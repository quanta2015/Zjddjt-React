{"ast":null,"code":"import \"antd/es/result/style\";\nimport _Result from \"antd/es/result\";\nimport \"antd/es/button/style\";\nimport _Button from \"antd/es/button\";\nimport \"antd/es/form/style\";\nimport _Form from \"antd/es/form\";\nimport \"antd/es/modal/style\";\nimport _Modal from \"antd/es/modal\";\nimport \"antd/es/input/style\";\nimport _Input from \"antd/es/input\";\n\nvar _dec,\n    _class,\n    _temp,\n    _jsxFileName = \"/Users/manqingchen/Documents/Project/Zjddjt/wechat/src/app/appy/index.js\";\n\nimport React from \"react\";\nimport { observer, inject } from \"mobx-react\";\nimport clone from 'util/clone';\nimport * as DT from 'util/date';\nimport \"./index.less\";\nimport moment from \"moment\";\nimport { toJS } from \"mobx\";\nconst TextArea = _Input.TextArea; // 申请加梯\n\nlet Appy = (_dec = inject('appyActions', 'appyStore'), _dec(_class = observer(_class = (_temp = class Appy extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.doReturn = link => {\n      window.location.replace(\"/#intr\");\n    };\n\n    this.doApply = e => {\n      e.preventDefault();\n      this.props.form.validateFields(async (err, values) => {\n        if (!err) {\n          _Modal.confirm({\n            title: '确认提交加梯申请?',\n            onOk: async () => {\n              let params = clone(values);\n              params.opid = this.state.code;\n              params.apdt = DT.newDateTime();\n              this.setState({\n                loading: true\n              });\n              let r = await this.action.addApply(params);\n\n              if (r && r.code === 200) {\n                this.setState({\n                  loading: false,\n                  succ: true\n                });\n              }\n            }\n          });\n        }\n      });\n    };\n\n    this.action = this.props.appyActions;\n    this.store = this.props.appyStore;\n    this.state = {\n      code: null,\n      loading: false,\n      succ: false\n    };\n  }\n\n  async UNSAFE_componentWillMount() {\n    const params = new URLSearchParams(this.props.location.search);\n    this.setState({\n      code: params.get(\"code\")\n    });\n  }\n\n  render() {\n    const getFieldDecorator = this.props.form.getFieldDecorator;\n    const succ = this.state.succ;\n    return React.createElement(\"div\", {\n      className: \"g-appy\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"m-appy-tl\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, \"\\u7533\\u8BF7\\u52A0\\u68AF\"), !succ && React.createElement(\"div\", {\n      className: \"m-appy\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(_Form, {\n      className: \"m-appy-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(_Form.Item, {\n      label: \"\\u7533\\u8BF7\\u4EBA\\u59D3\\u540D\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, getFieldDecorator('name', {\n      rules: [{\n        required: true,\n        message: '请输入姓名！'\n      }],\n      initialValue: ''\n    })(React.createElement(_Input, {\n      className: \"input-text\",\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u59D3\\u540D...\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }))), React.createElement(_Form.Item, {\n      label: \"\\u7533\\u8BF7\\u4EBA\\u7535\\u8BDD\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, getFieldDecorator('phon', {\n      rules: [{\n        required: true,\n        message: '请输入电话！'\n      }],\n      initialValue: ''\n    })(React.createElement(_Input, {\n      className: \"input-text\",\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u7535\\u8BDD...\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }))), React.createElement(_Form.Item, {\n      label: \"\\u7533\\u8BF7\\u52A0\\u68AF\\u697C\\u623F\\u5730\\u5740\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, getFieldDecorator('addr', {\n      rules: [{\n        required: true,\n        message: '请输入楼房地址！'\n      }],\n      initialValue: ''\n    })(React.createElement(TextArea, {\n      rows: 4,\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u697C\\u623F\\u5730\\u5740...\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }))), React.createElement(_Form.Item, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(_Button, {\n      type: \"primary\",\n      className: \"input-btn\",\n      htmlType: \"submit\",\n      onClick: this.doApply,\n      block: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, \"\\u63D0 \\u4EA4\")))), succ && React.createElement(\"div\", {\n      className: \"m-ret\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(_Result, {\n      title: \"\\u60A8\\u7684\\u52A0\\u68AF\\u7533\\u8BF7\\u63D0\\u4EA4\\u6210\\u529F\\uFF0C\\u8BF7\\u7B49\\u5F85\\u5DE5\\u4F5C\\u4EBA\\u5458\\u56DE\\u590D\",\n      extra: React.createElement(_Button, {\n        type: \"primary\",\n        className: \"input-btn\",\n        onClick: this.doReturn,\n        block: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, \"\\u8FD4 \\u56DE\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    })));\n  }\n\n}, _temp)) || _class) || _class);\nexport default _Form.create()(Appy);","map":{"version":3,"sources":["/Users/manqingchen/Documents/Project/Zjddjt/wechat/src/app/appy/index.js"],"names":["React","observer","inject","clone","DT","moment","toJS","TextArea","Appy","Component","constructor","props","doReturn","link","window","location","replace","doApply","e","preventDefault","form","validateFields","err","values","confirm","title","onOk","params","opid","state","code","apdt","newDateTime","setState","loading","r","action","addApply","succ","appyActions","store","appyStore","UNSAFE_componentWillMount","URLSearchParams","search","get","render","getFieldDecorator","rules","required","message","initialValue","create"],"mappings":";;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,EAAmBC,MAAnB,QAAiC,YAAjC;AAEA,OAAOC,KAAP,MAAkB,YAAlB;AACA,OAAO,KAAKC,EAAZ,MAAqB,WAArB;AAEA,OAAO,cAAP;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,SAASC,IAAT,QAAqB,MAArB;MAEQC,Q,UAAAA,Q,EAGR;;IAGMC,I,WAFLN,MAAM,CAAC,aAAD,EAAgB,WAAhB,C,gBACND,Q,mBADD,MAEMO,IAFN,SAEmBR,KAAK,CAACS,SAFzB,CAEmC;AACjCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAoBnBC,QApBmB,GAoBPC,IAAD,IAAS;AAClBC,MAAAA,MAAM,CAACC,QAAP,CAAgBC,OAAhB;AACD,KAtBkB;;AAAA,SAwBnBC,OAxBmB,GAwBRC,CAAD,IAAK;AACbA,MAAAA,CAAC,CAACC,cAAF;AACA,WAAKR,KAAL,CAAWS,IAAX,CAAgBC,cAAhB,CAAgC,OAAOC,GAAP,EAAYC,MAAZ,KAAuB;AACrD,YAAI,CAACD,GAAL,EAAU;AACR,iBAAME,OAAN,CAAc;AACZC,YAAAA,KAAK,EAAE,WADK;AAEZC,YAAAA,IAAI,EAAE,YAAW;AACf,kBAAIC,MAAM,GAAGxB,KAAK,CAACoB,MAAD,CAAlB;AACAI,cAAAA,MAAM,CAACC,IAAP,GAAc,KAAKC,KAAL,CAAWC,IAAzB;AACAH,cAAAA,MAAM,CAACI,IAAP,GAAc3B,EAAE,CAAC4B,WAAH,EAAd;AACA,mBAAKC,QAAL,CAAc;AAAEC,gBAAAA,OAAO,EAAE;AAAX,eAAd;AACA,kBAAIC,CAAC,GAAG,MAAM,KAAKC,MAAL,CAAYC,QAAZ,CAAqBV,MAArB,CAAd;;AACA,kBAAIQ,CAAC,IAAIA,CAAC,CAACL,IAAF,KAAW,GAApB,EAAyB;AACvB,qBAAKG,QAAL,CAAc;AAAEC,kBAAAA,OAAO,EAAE,KAAX;AAAkBI,kBAAAA,IAAI,EAAE;AAAxB,iBAAd;AACD;AACF;AAXW,WAAd;AAaD;AACF,OAhBD;AAiBD,KA3CkB;;AAEjB,SAAKF,MAAL,GAAc,KAAKzB,KAAL,CAAW4B,WAAzB;AACA,SAAKC,KAAL,GAAc,KAAK7B,KAAL,CAAW8B,SAAzB;AACA,SAAKZ,KAAL,GAAa;AACXC,MAAAA,IAAI,EAAE,IADK;AAEXI,MAAAA,OAAO,EAAE,KAFE;AAGXI,MAAAA,IAAI,EAAE;AAHK,KAAb;AAKD;;AAGD,QAAMI,yBAAN,GAAkC;AAChC,UAAMf,MAAM,GAAG,IAAIgB,eAAJ,CAAoB,KAAKhC,KAAL,CAAWI,QAAX,CAAoB6B,MAAxC,CAAf;AACA,SAAKX,QAAL,CAAc;AACZH,MAAAA,IAAI,EAAEH,MAAM,CAACkB,GAAP,CAAW,MAAX;AADM,KAAd;AAGD;;AA4BDC,EAAAA,MAAM,GAAG;AAAA,UACCC,iBADD,GACuB,KAAKpC,KAAL,CAAWS,IADlC,CACC2B,iBADD;AAAA,UAEAT,IAFA,GAEQ,KAAKT,KAFb,CAEAS,IAFA;AAIP,WACE;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCADF,EAGI,CAACA,IAAF,IACD;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAM,MAAA,SAAS,EAAC,aAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,0BAAM,IAAN;AAAW,MAAA,KAAK,EAAC,gCAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGS,iBAAiB,CAAC,MAAD,EAAS;AACzBC,MAAAA,KAAK,EAAE,CAAC;AAAEC,QAAAA,QAAQ,EAAE,IAAZ;AAAkBC,QAAAA,OAAO,EAAE;AAA3B,OAAD,CADkB;AAEzBC,MAAAA,YAAY,EAAC;AAFY,KAAT,CAAjB,CAGE;AAAO,MAAA,SAAS,EAAC,YAAjB;AAA8B,MAAA,WAAW,EAAC,mCAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHF,CADH,CADF,EAOE,0BAAM,IAAN;AAAW,MAAA,KAAK,EAAC,gCAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGJ,iBAAiB,CAAC,MAAD,EAAS;AACzBC,MAAAA,KAAK,EAAE,CAAC;AAAEC,QAAAA,QAAQ,EAAE,IAAZ;AAAkBC,QAAAA,OAAO,EAAE;AAA3B,OAAD,CADkB;AAEzBC,MAAAA,YAAY,EAAE;AAFW,KAAT,CAAjB,CAGE;AAAO,MAAA,SAAS,EAAC,YAAjB;AAA8B,MAAA,WAAW,EAAC,mCAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHF,CADH,CAPF,EAaE,0BAAM,IAAN;AAAW,MAAA,KAAK,EAAC,kDAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGJ,iBAAiB,CAAC,MAAD,EAAS;AACzBC,MAAAA,KAAK,EAAE,CAAC;AAAEC,QAAAA,QAAQ,EAAE,IAAZ;AAAkBC,QAAAA,OAAO,EAAE;AAA3B,OAAD,CADkB;AAEzBC,MAAAA,YAAY,EAAE;AAFW,KAAT,CAAjB,CAGE,oBAAC,QAAD;AAAU,MAAA,IAAI,EAAE,CAAhB;AAAmB,MAAA,WAAW,EAAC,+CAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHF,CADH,CAbF,EAmBE,0BAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAQ,MAAA,IAAI,EAAC,SAAb;AAAuB,MAAA,SAAS,EAAC,WAAjC;AAA6C,MAAA,QAAQ,EAAC,QAAtD;AAA+D,MAAA,OAAO,EAAE,KAAKlC,OAA7E;AAAsF,MAAA,KAAK,MAA3F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADF,CAnBF,CADF,CAJF,EA8BIqB,IAAD,IACD;AAAK,MAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AACE,MAAA,KAAK,EAAC,0HADR;AAEE,MAAA,KAAK,EACH;AAAQ,QAAA,IAAI,EAAC,SAAb;AAAuB,QAAA,SAAS,EAAC,WAAjC;AAA6C,QAAA,OAAO,EAAE,KAAK1B,QAA3D;AAAqE,QAAA,KAAK,MAA1E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAHJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CA/BF,CADF;AA6CD;;AA/FgC,C;AAmGnC,eAAe,MAAKwC,MAAL,GAAc5C,IAAd,CAAf","sourcesContent":["import React from \"react\";\nimport { observer, inject } from \"mobx-react\";\nimport { Input, Tabs, Form, Button, DatePicker,Result,Modal, message, Skeleton } from \"antd\";\nimport clone from 'util/clone'\nimport * as DT  from 'util/date'\n\nimport \"./index.less\";\nimport moment from \"moment\";\nimport { toJS } from \"mobx\";\n\nconst { TextArea } = Input;\n\n\n// 申请加梯\n@inject('appyActions', 'appyStore')\n@observer\nclass Appy extends React.Component {\n  constructor(props) {\n    super(props);\n    this.action = this.props.appyActions\n    this.store  = this.props.appyStore\n    this.state = {\n      code: null,\n      loading: false,\n      succ: false,\n    }\n  }\n\n \n  async UNSAFE_componentWillMount() {\n    const params = new URLSearchParams(this.props.location.search)\n    this.setState({\n      code: params.get(\"code\"),\n    })\n  }\n\n\n  doReturn = (link) =>{\n    window.location.replace(`/#intr`)\n  }\n\n  doApply = (e)=>{\n    e.preventDefault();\n    this.props.form.validateFields( async (err, values) => {\n      if (!err) {\n        Modal.confirm({\n          title: '确认提交加梯申请?',\n          onOk: async ()=> {\n            let params = clone(values)\n            params.opid = this.state.code\n            params.apdt = DT.newDateTime()\n            this.setState({ loading: true })\n            let r = await this.action.addApply(params)\n            if (r && r.code === 200) {\n              this.setState({ loading: false, succ: true })\n            }\n          }\n        })\n      }\n    })\n  }\n\n  render() {\n    const { getFieldDecorator } = this.props.form;\n    const {succ} = this.state\n\n    return (\n      <div className='g-appy'>\n        <div className=\"m-appy-tl\">申请加梯</div>\n\n        {(!succ)&&\n        <div className=\"m-appy\">\n          <Form className=\"m-appy-form\">\n            <Form.Item label=\"申请人姓名\">\n              {getFieldDecorator('name', {\n                rules: [{ required: true, message: '请输入姓名！' }],\n                initialValue:''\n              })(<Input className=\"input-text\" placeholder=\"请输入姓名...\" />)}\n            </Form.Item>\n            <Form.Item label=\"申请人电话\">\n              {getFieldDecorator('phon', {\n                rules: [{ required: true, message: '请输入电话！' }],\n                initialValue: '' \n              })(<Input className=\"input-text\" placeholder=\"请输入电话...\"/>)}\n            </Form.Item>\n            <Form.Item label=\"申请加梯楼房地址\">\n              {getFieldDecorator('addr', {\n                rules: [{ required: true, message: '请输入楼房地址！' }],\n                initialValue: '' \n              })(<TextArea rows={4} placeholder=\"请输入楼房地址...\"/>)}\n            </Form.Item>\n            <Form.Item>\n              <Button type=\"primary\" className=\"input-btn\" htmlType=\"submit\" onClick={this.doApply} block>提 交</Button>\n            </Form.Item>\n          </Form>\n        </div>}\n        \n        {(succ)&&\n        <div className=\"m-ret\">\n          <Result\n            title=\"您的加梯申请提交成功，请等待工作人员回复\"\n            extra={\n              <Button type=\"primary\" className=\"input-btn\" onClick={this.doReturn} block>\n                返 回\n              </Button>\n            }\n          />\n        </div>}\n\n      </div>\n    )\n  }\n}\n\n\nexport default Form.create()(Appy);\n"]},"metadata":{},"sourceType":"module"}