{"ast":null,"code":"import \"antd/es/modal/style\";\nimport _Modal from \"antd/es/modal\";\nimport \"antd/es/result/style\";\nimport _Result from \"antd/es/result\";\nimport \"antd/es/button/style\";\nimport _Button from \"antd/es/button\";\nimport \"antd/es/form/style\";\nimport _Form from \"antd/es/form\";\nimport \"antd/es/input/style\";\nimport _Input from \"antd/es/input\";\n\nvar _dec,\n    _class,\n    _temp,\n    _jsxFileName = \"/Users/manqingchen/Documents/Project/Zjddjt/wechat/src/app/appy/index.js\";\n\nimport React from \"react\";\nimport { observer, inject } from \"mobx-react\";\nimport clone from 'util/clone';\nimport * as DT from 'util/date';\nimport \"./index.less\";\nimport moment from \"moment\";\nimport { toJS } from \"mobx\";\nconst TextArea = _Input.TextArea; // 申请加梯\n\nlet Appy = (_dec = inject('appyActions', 'appyStore'), _dec(_class = observer(_class = (_temp = class Appy extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.doReturn = link => {\n      window.location.replace(\"/#intr\");\n    };\n\n    this.handleCancel = () => {\n      this.setState({\n        visible: false\n      });\n    };\n\n    this.doApply = e => {\n      e.preventDefault();\n      this.props.form.validateFields(async (err, values) => {\n        if (!err) {\n          this.setState({\n            visible: true\n          });\n        }\n      });\n    };\n\n    this.handleOk = () => {\n      this.setState({\n        confirmLoading: true\n      });\n      this.props.form.validateFields(async (err, values) => {\n        if (!err) {\n          let params = clone(values);\n          params.opid = this.state.code;\n          params.apdt = DT.newDateTime();\n          this.setState({\n            loading: true\n          });\n          let r = await this.action.addApply(params);\n\n          if (r && r.code === 200) {\n            this.setState({\n              loading: false,\n              succ: true,\n              visible: false\n            });\n          }\n        }\n      });\n    };\n\n    this.action = this.props.appyActions;\n    this.store = this.props.appyStore;\n    this.state = {\n      code: null,\n      loading: false,\n      succ: false,\n      visible: false\n    };\n  }\n\n  async UNSAFE_componentWillMount() {\n    const params = new URLSearchParams(this.props.location.search);\n    this.setState({\n      code: params.get(\"code\")\n    });\n  }\n\n  render() {\n    const getFieldDecorator = this.props.form.getFieldDecorator;\n    const _this$state = this.state,\n          succ = _this$state.succ,\n          visible = _this$state.visible,\n          loading = _this$state.loading;\n    return React.createElement(\"div\", {\n      className: \"g-appy\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"m-appy-tl\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, \"\\u7533\\u8BF7\\u52A0\\u68AF\"), !succ && React.createElement(\"div\", {\n      className: \"m-appy\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(_Form, {\n      className: \"m-appy-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(_Form.Item, {\n      label: \"\\u7533\\u8BF7\\u4EBA\\u59D3\\u540D\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, getFieldDecorator('name', {\n      rules: [{\n        required: true,\n        message: '请输入姓名！'\n      }],\n      initialValue: ''\n    })(React.createElement(_Input, {\n      className: \"input-text\",\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u59D3\\u540D...\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }))), React.createElement(_Form.Item, {\n      label: \"\\u7533\\u8BF7\\u4EBA\\u7535\\u8BDD\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, getFieldDecorator('phon', {\n      rules: [{\n        required: true,\n        message: '请输入电话！'\n      }],\n      initialValue: ''\n    })(React.createElement(_Input, {\n      className: \"input-text\",\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u7535\\u8BDD...\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }))), React.createElement(_Form.Item, {\n      label: \"\\u7533\\u8BF7\\u52A0\\u68AF\\u697C\\u623F\\u5730\\u5740\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, getFieldDecorator('addr', {\n      rules: [{\n        required: true,\n        message: '请输入楼房地址！'\n      }],\n      initialValue: ''\n    })(React.createElement(TextArea, {\n      rows: 4,\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u697C\\u623F\\u5730\\u5740...\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }))), React.createElement(_Form.Item, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(_Button, {\n      type: \"primary\",\n      className: \"input-btn\",\n      htmlType: \"submit\",\n      onClick: this.doApply,\n      block: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, \"\\u63D0 \\u4EA4\")))), succ && React.createElement(\"div\", {\n      className: \"m-ret\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(_Result, {\n      title: \"\\u60A8\\u7684\\u52A0\\u68AF\\u7533\\u8BF7\\u63D0\\u4EA4\\u6210\\u529F\\uFF0C\\u8BF7\\u7B49\\u5F85\\u5DE5\\u4F5C\\u4EBA\\u5458\\u56DE\\u590D\",\n      extra: React.createElement(_Button, {\n        type: \"primary\",\n        className: \"input-btn\",\n        onClick: this.doReturn,\n        block: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, \"\\u8FD4 \\u56DE\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    })), React.createElement(_Modal, {\n      title: \"\\u786E\\u8BA4\\u63D0\\u4EA4\\u52A0\\u68AF\\u7533\\u8BF7?\",\n      visible: visible,\n      onOk: this.handleOk,\n      confirmLoading: loading,\n      onCancel: this.handleCancel,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }));\n  }\n\n}, _temp)) || _class) || _class);\nexport default _Form.create()(Appy);","map":{"version":3,"sources":["/Users/manqingchen/Documents/Project/Zjddjt/wechat/src/app/appy/index.js"],"names":["React","observer","inject","clone","DT","moment","toJS","TextArea","Appy","Component","constructor","props","doReturn","link","window","location","replace","handleCancel","setState","visible","doApply","e","preventDefault","form","validateFields","err","values","handleOk","confirmLoading","params","opid","state","code","apdt","newDateTime","loading","r","action","addApply","succ","appyActions","store","appyStore","UNSAFE_componentWillMount","URLSearchParams","search","get","render","getFieldDecorator","rules","required","message","initialValue","create"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { observer, inject } from \"mobx-react\";\nimport { Input, Tabs, Form, Button, DatePicker,Result,Modal, message, Skeleton } from \"antd\";\nimport clone from 'util/clone'\nimport * as DT  from 'util/date'\n\nimport \"./index.less\";\nimport moment from \"moment\";\nimport { toJS } from \"mobx\";\n\nconst { TextArea } = Input;\n\n\n// 申请加梯\n@inject('appyActions', 'appyStore')\n@observer\nclass Appy extends React.Component {\n  constructor(props) {\n    super(props);\n    this.action = this.props.appyActions\n    this.store  = this.props.appyStore\n    this.state = {\n      code: null,\n      loading: false,\n      succ: false,\n      visible: false,\n    }\n  }\n\n \n  async UNSAFE_componentWillMount() {\n    const params = new URLSearchParams(this.props.location.search)\n    this.setState({\n      code: params.get(\"code\"),\n    })\n  }\n\n\n  doReturn = (link) =>{\n    window.location.replace(`/#intr`)\n  }\n\n  handleCancel = () => {\n    this.setState({\n      visible: false,\n    });\n  };\n\n  doApply = (e)=>{\n    e.preventDefault();\n\n    this.props.form.validateFields( async (err, values) => {\n      if (!err) {\n        this.setState({\n      visible: true,\n    });\n      }\n    })\n\n    \n    \n  }\n\n  handleOk = () => {\n\n    this.setState({\n      confirmLoading: true,\n    });\n\n    this.props.form.validateFields( async (err, values) => {\n      if (!err) {\n        let params = clone(values)\n        params.opid = this.state.code\n        params.apdt = DT.newDateTime()\n        this.setState({ loading: true })\n        let r = await this.action.addApply(params)\n        if (r && r.code === 200) {\n          this.setState({ loading: false, succ: true,visible: false, })\n        }\n      }\n    })\n  }\n\n  render() {\n    const { getFieldDecorator } = this.props.form;\n    const {succ,visible, loading} = this.state\n\n    return (\n      <div className='g-appy'>\n        <div className=\"m-appy-tl\">申请加梯</div>\n\n        {(!succ)&&\n        <div className=\"m-appy\">\n          <Form className=\"m-appy-form\">\n            <Form.Item label=\"申请人姓名\">\n              {getFieldDecorator('name', {\n                rules: [{ required: true, message: '请输入姓名！' }],\n                initialValue:''\n              })(<Input className=\"input-text\" placeholder=\"请输入姓名...\" />)}\n            </Form.Item>\n            <Form.Item label=\"申请人电话\">\n              {getFieldDecorator('phon', {\n                rules: [{ required: true, message: '请输入电话！' }],\n                initialValue: '' \n              })(<Input className=\"input-text\" placeholder=\"请输入电话...\"/>)}\n            </Form.Item>\n            <Form.Item label=\"申请加梯楼房地址\">\n              {getFieldDecorator('addr', {\n                rules: [{ required: true, message: '请输入楼房地址！' }],\n                initialValue: '' \n              })(<TextArea rows={4} placeholder=\"请输入楼房地址...\"/>)}\n            </Form.Item>\n            <Form.Item>\n              <Button type=\"primary\" className=\"input-btn\" htmlType=\"submit\" onClick={this.doApply} block>提 交</Button>\n            </Form.Item>\n          </Form>\n        </div>}\n        \n        {(succ)&&\n        <div className=\"m-ret\">\n          <Result\n            title=\"您的加梯申请提交成功，请等待工作人员回复\"\n            extra={ <Button type=\"primary\" className=\"input-btn\" onClick={this.doReturn} block>返 回</Button> }\n          />\n        </div>}\n\n\n        <Modal\n          title=\"确认提交加梯申请?\"\n          visible={visible}\n          onOk={this.handleOk}\n          confirmLoading={loading}\n          onCancel={this.handleCancel}\n        />\n\n      </div>\n    )\n  }\n}\n\n\nexport default Form.create()(Appy);\n"]},"metadata":{},"sourceType":"module"}