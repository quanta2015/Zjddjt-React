{"ast":null,"code":"import \"antd/es/modal/style\";\nimport _Modal from \"antd/es/modal\";\nimport \"antd/es/result/style\";\nimport _Result from \"antd/es/result\";\nimport \"antd/es/button/style\";\nimport _Button from \"antd/es/button\";\nimport \"antd/es/form/style\";\nimport _Form from \"antd/es/form\";\nimport \"antd/es/select/style\";\nimport _Select from \"antd/es/select\";\nimport \"antd/es/input/style\";\nimport _Input from \"antd/es/input\";\n\nvar _dec,\n    _class,\n    _temp,\n    _jsxFileName = \"/Users/manqingchen/Documents/Project/Zjddjt/wechat/src/app/coop/index.js\";\n\nimport React from \"react\";\nimport { observer, inject } from \"mobx-react\";\nimport clone from \"util/clone\";\nimport * as DT from \"util/date\";\nimport REG from \"constant/reg\";\nimport \"./index.less\";\nconst TextArea = _Input.TextArea;\nconst Option = _Select.Option; // 品牌指定\n\nlet Coop = (_dec = inject(\"coopActions\", \"coopStore\"), _dec(_class = observer(_class = (_temp = class Coop extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = value => {\n      this.setState({\n        selectType: value\n      });\n    };\n\n    this.doReturn = link => {\n      window.location.replace(\"/#intr\");\n    };\n\n    this.handleCancel = () => {\n      this.setState({\n        visible: false\n      });\n    };\n\n    this.doApply = e => {\n      e.preventDefault();\n      this.props.form.validateFields(async (err, values) => {\n        if (!err) {\n          this.setState({\n            visible: true,\n            values: values\n          });\n        }\n      });\n    };\n\n    this.handleOk = async () => {\n      let params = clone(this.state.values);\n      params.opid = this.state.code;\n      params.apdt = DT.newDateTime();\n      this.setState({\n        loading: true\n      });\n      let r = await this.action.addCoop(params);\n\n      if (r && r.code === 200) {\n        this.setState({\n          loading: false,\n          succ: true,\n          visible: false\n        });\n      }\n    };\n\n    this.validateType = (rule, value, callback) => {\n      value === \"请选择服务类型\" ? callback(\"请选择服务类型!\") : callback();\n    };\n\n    this.validatePhone = async (rule, value, callback) => {\n      (await REG.PHONE.test(value)) || REG.TEL.test(value) ? callback() : callback(\"请输入正确的电话/手机\");\n    };\n\n    this.action = this.props.coopActions;\n    this.store = this.props.coopStore;\n    this.state = {\n      code: null,\n      loading: false,\n      succ: false,\n      visible: false,\n      selectType: null,\n      typeList: [\"加梯材料\", \"加梯服务\", \"特务推广\", \"其它\"]\n    };\n  }\n\n  componentDidMount() {\n    const params = new URLSearchParams(this.props.location.search);\n    this.setState({\n      code: params.get(\"code\")\n    });\n    console.log(\"did mount\", this.store, this.action);\n  }\n\n  render() {\n    const getFieldDecorator = this.props.form.getFieldDecorator;\n    const _this$state = this.state,\n          succ = _this$state.succ,\n          visible = _this$state.visible,\n          loading = _this$state.loading,\n          typeList = _this$state.typeList;\n    return React.createElement(\"div\", {\n      className: \"g-coop\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"m-coop-tl\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, \"\\u5546\\u52A1\\u5408\\u4F5C\"), !succ && React.createElement(\"div\", {\n      className: \"m-coop\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(_Form, {\n      className: \"m-coop-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(_Form.Item, {\n      label: \"\\u5355\\u4F4D\\u540D\\u79F0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, getFieldDecorator(\"name\", {\n      rules: [{\n        required: true,\n        message: \"请输入单位名称！\"\n      }],\n      initialValue: \"\"\n    })(React.createElement(_Input, {\n      className: \"input-text\",\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u5355\\u4F4D\\u540D\\u79F0...\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }))), React.createElement(_Form.Item, {\n      label: \"\\u670D\\u52A1\\u7C7B\\u578B\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, getFieldDecorator(\"type\", {\n      rules: [{\n        required: true,\n        message: \"请选择服务类型！\"\n      }, {\n        validator: this.validateType\n      }],\n      initialValue: \"请选择服务类型\"\n    })(React.createElement(_Select, {\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, typeList.map((item, index) => React.createElement(Option, {\n      value: item,\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, item))))), React.createElement(_Form.Item, {\n      label: \"\\u5355\\u4F4D\\u5730\\u5740\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, getFieldDecorator(\"addr\", {\n      // rules: [{ required: true, message: \"请输入单位地址！\" }],\n      initialValue: \"\"\n    })(React.createElement(TextArea, {\n      rows: 2,\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u5355\\u4F4D\\u5730\\u5740...\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }))), React.createElement(_Form.Item, {\n      label: \"\\u8054\\u7CFB\\u4EBA\\u59D3\\u540D\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, getFieldDecorator(\"contact\", {\n      rules: [{\n        required: true,\n        message: \"请输入联系人姓名！\"\n      }],\n      initialValue: \"\"\n    })(React.createElement(_Input, {\n      className: \"input-text\",\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u8054\\u7CFB\\u4EBA\\u59D3\\u540D...\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }))), React.createElement(_Form.Item, {\n      label: \"\\u8054\\u7CFB\\u4EBA\\u7535\\u8BDD/\\u624B\\u673A\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, getFieldDecorator(\"phone\", {\n      rules: [{\n        required: true,\n        message: \"请输入联系人电话/手机！\"\n      }, {\n        validator: this.validatePhone\n      }],\n      initialValue: \"\"\n    })(React.createElement(_Input, {\n      className: \"input-text\",\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u8054\\u7CFB\\u4EBA\\u7535\\u8BDD...\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }))), React.createElement(_Form.Item, {\n      label: \"\\u66F4\\u591A\\u63CF\\u8FF0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, getFieldDecorator(\"des\", {\n      initialValue: \"\"\n    })(React.createElement(TextArea, {\n      rows: 4,\n      placeholder: \"\\u60A8\\u6709\\u4EC0\\u4E48\\u60F3\\u63D0\\u524D\\u544A\\u8BC9\\u6211\\u4EEC\\u7684\\u5417...\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }))), React.createElement(_Form.Item, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, React.createElement(_Button, {\n      type: \"primary\",\n      className: \"input-btn\",\n      htmlType: \"submit\",\n      onClick: this.doApply,\n      block: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, \"\\u63D0 \\u4EA4\")))), succ && React.createElement(\"div\", {\n      className: \"m-ret\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(_Result, {\n      title: \"\\u60A8\\u7684\\u52A0\\u68AF\\u7533\\u8BF7\\u63D0\\u4EA4\\u6210\\u529F\\uFF0C\\u8BF7\\u7B49\\u5F85\\u5DE5\\u4F5C\\u4EBA\\u5458\\u56DE\\u590D\",\n      extra: React.createElement(_Button, {\n        type: \"primary\",\n        className: \"input-btn\",\n        onClick: this.doReturn,\n        block: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, \"\\u8FD4 \\u56DE\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    })), React.createElement(_Modal, {\n      visible: visible,\n      onOk: this.handleOk,\n      confirmLoading: loading,\n      onCancel: this.handleCancel,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, \"\\u786E\\u8BA4\\u63D0\\u4EA4\\u52A0\\u68AF\\u7533\\u8BF7?\")));\n  }\n\n}, _temp)) || _class) || _class);\nexport default _Form.create()(Coop);","map":{"version":3,"sources":["/Users/manqingchen/Documents/Project/Zjddjt/wechat/src/app/coop/index.js"],"names":["React","observer","inject","clone","DT","REG","TextArea","Option","Coop","Component","constructor","props","handleChange","value","setState","selectType","doReturn","link","window","location","replace","handleCancel","visible","doApply","e","preventDefault","form","validateFields","err","values","handleOk","params","state","opid","code","apdt","newDateTime","loading","r","action","addCoop","succ","validateType","rule","callback","validatePhone","PHONE","test","TEL","coopActions","store","coopStore","typeList","componentDidMount","URLSearchParams","search","get","console","log","render","getFieldDecorator","rules","required","message","initialValue","validator","map","item","index","create"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { observer, inject } from \"mobx-react\";\nimport { Input, Tabs, Form, Button, DatePicker, Result, Modal, message, Skeleton, Select } from \"antd\";\nimport clone from \"util/clone\";\nimport * as DT from \"util/date\";\nimport REG from \"constant/reg\";\nimport \"./index.less\";\n\nconst { TextArea } = Input;\nconst { Option } = Select;\n\n// 品牌指定\n@inject(\"coopActions\", \"coopStore\")\n@observer\nclass Coop extends React.Component {\n  constructor(props) {\n    super(props);\n    this.action = this.props.coopActions;\n    this.store = this.props.coopStore;\n    this.state = {\n      code: null,\n      loading: false,\n      succ: false,\n      visible: false,\n      selectType: null,\n      typeList: [\"加梯材料\", \"加梯服务\", \"特务推广\", \"其它\"]\n    };\n  }\n\n  handleChange = (value) => {\n    this.setState({\n      selectType: value\n    });\n  };\n\n  componentDidMount() {\n    const params = new URLSearchParams(this.props.location.search);\n    this.setState({\n      code: params.get(\"code\")\n    });\n\n    console.log(\"did mount\", this.store, this.action);\n  }\n\n  doReturn = (link) => {\n    window.location.replace(`/#intr`);\n  };\n\n  handleCancel = () => {\n    this.setState({\n      visible: false\n    });\n  };\n\n  doApply = (e) => {\n    e.preventDefault();\n    this.props.form.validateFields(async (err, values) => {\n      if (!err) {\n        this.setState({ visible: true, values: values });\n      }\n    });\n  };\n\n  handleOk = async () => {\n    let params = clone(this.state.values);\n    params.opid = this.state.code;\n    params.apdt = DT.newDateTime();\n    this.setState({ loading: true });\n    let r = await this.action.addCoop(params);\n    if (r && r.code === 200) {\n      this.setState({ loading: false, succ: true, visible: false });\n    }\n  };\n\n  validateType = (rule, value, callback) => {\n    value === \"请选择服务类型\" ? callback(\"请选择服务类型!\") : callback();\n  };\n\n  validatePhone = async (rule, value, callback) => {\n    await (REG.PHONE.test(value)) || (REG.TEL.test(value)) ? callback() : callback(\"请输入正确的电话/手机\");\n  };\n\n  render() {\n    const { getFieldDecorator } = this.props.form;\n    const { succ, visible, loading, typeList } = this.state;\n\n    return (\n      <div className='g-coop'>\n        <div className=\"m-coop-tl\">商务合作</div>\n\n        {(!succ) &&\n        <div className=\"m-coop\">\n          <Form className=\"m-coop-form\">\n            <Form.Item label=\"单位名称\">\n              {getFieldDecorator(\"name\", {\n                rules: [{ required: true, message: \"请输入单位名称！\" }],\n                initialValue: \"\"\n              })(<Input className=\"input-text\" placeholder=\"请输入单位名称...\"/>)}\n            </Form.Item>\n\n            <Form.Item label=\"服务类型\">\n              {getFieldDecorator(\"type\", {\n                rules: [\n                  { required: true, message: \"请选择服务类型！\" },\n                  { validator: this.validateType }\n                ],\n                initialValue: \"请选择服务类型\"\n              })(\n                <Select onChange={this.handleChange}>\n                  {typeList.map((item, index) => (\n                    <Option value={item} key={index}>{item}</Option>\n                  ))}\n                </Select>\n              )}\n            </Form.Item>\n\n            <Form.Item label=\"单位地址\">\n              {getFieldDecorator(\"addr\", {\n                // rules: [{ required: true, message: \"请输入单位地址！\" }],\n                initialValue: \"\"\n              })(<TextArea rows={2} placeholder=\"请输入单位地址...\"/>)}\n            </Form.Item>\n\n            <Form.Item label=\"联系人姓名\">\n              {getFieldDecorator(\"contact\", {\n                rules: [{ required: true, message: \"请输入联系人姓名！\" }],\n                initialValue: \"\"\n              })(<Input className=\"input-text\" placeholder=\"请输入联系人姓名...\"/>)}\n            </Form.Item>\n\n            <Form.Item label=\"联系人电话/手机\">\n              {getFieldDecorator(\"phone\", {\n                rules: [\n                  { required: true, message: \"请输入联系人电话/手机！\" },\n                  { validator: this.validatePhone }\n                ],\n                initialValue: \"\"\n              })(<Input className=\"input-text\" placeholder=\"请输入联系人电话...\"/>)}\n            </Form.Item>\n\n            <Form.Item label=\"更多描述\">\n              {getFieldDecorator(\"des\", {\n                initialValue: \"\"\n              })(<TextArea rows={4} placeholder=\"您有什么想提前告诉我们的吗...\"/>)}\n            </Form.Item>\n\n            <Form.Item>\n              <Button type=\"primary\" className=\"input-btn\" htmlType=\"submit\" onClick={this.doApply} block>提 交</Button>\n            </Form.Item>\n          </Form>\n        </div>}\n\n        {(succ) &&\n        <div className=\"m-ret\">\n          <Result\n            title=\"您的加梯申请提交成功，请等待工作人员回复\"\n            extra={<Button type=\"primary\" className=\"input-btn\" onClick={this.doReturn} block>返 回</Button>}\n          />\n        </div>}\n\n        <Modal\n          visible={visible}\n          onOk={this.handleOk}\n          confirmLoading={loading}\n          onCancel={this.handleCancel}\n\n        ><p>确认提交加梯申请?</p></Modal>\n\n      </div>\n    );\n  }\n}\n\nexport default Form.create()(Coop);\n"]},"metadata":{},"sourceType":"module"}